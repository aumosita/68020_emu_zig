# 계층화 기준

## 목표

- 디코딩, 실행, 상태 관리의 책임을 명확히 분리
- 변경 시 영향 범위를 작게 유지

## 파일별 책임

- `decoder.zig`: 인코딩 해석, 오퍼랜드/크기/확장 워드 구성
- `executor.zig`: 명령 실행 및 플래그/예외 의미론
- `cpu.zig`: 실행 루프, IRQ 처리, 예외 진입/복귀
- `memory.zig`: 메모리 접근 규칙(정렬 포함)
- `root.zig`: 외부 API 표면

## 원칙

- 디코더는 실행 부작용을 만들지 않는다.
- 실행기는 디코더 결과(`Instruction`)를 신뢰하고 PC는 `i.size` 기준으로 전진시킨다.
- 예외 라우팅 규칙은 `cpu.step()`에서 일관되게 유지한다.
- API 계층(`root.zig`)은 내부 구조를 누수하지 않는다.
